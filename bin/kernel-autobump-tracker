#!/bin/bash

. /etc/profile
. /sabayon/bin/kernels.inc

cd $(dirname "${0}") || exit 1

# Tracked kernels
for kernel in ${kernels}; do
	kernel="${kernel%-sabayon}"
	k_ver=$(echo "${kernel}" | awk --field-separator . '{ print $1 }')
	k_patchlevel=$(echo "${kernel}" | awk --field-separator . '{ print $2 }')
	k_sublevel=$(echo "${kernel}" | awk --field-separator . '{ print $3 }')
	echo "Tracking ${kernel} -> ${k_ver}, ${k_patchlevel}, ${k_sublevel}"
	./kernel-autobump /home/fabio/repos/kernel stable origin "${k_ver}.${k_patchlevel}" sabayon- "${k_ver}\.${k_patchlevel}\.[0-9999]"
done
